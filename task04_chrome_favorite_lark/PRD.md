# Chrome扩展 - 飞书多维表格书签收藏器 PRD

## 1. 项目概述

### 1.1 项目名称
Lark Bookmarks - 飞书书签收藏器

### 1.2 项目背景
用户在浏览网页时经常遇到有价值的内容，希望能够快速保存到飞书多维表格中进行统一管理和后续处理。当前缺乏便捷的工具直接将网页信息同步到飞书多维表格。

### 1.3 项目目标
开发一个Chrome扩展，允许用户一键将当前网页的基本信息（标题、URL、描述等）保存到指定的飞书多维表格中。

## 2. 功能需求

### 2.1 核心功能
- **一键收藏**：点击扩展图标即可收藏当前网页
- **自动信息提取**：自动获取网页标题、URL、描述、favicon
- **飞书集成**：直接添加数据到指定的飞书多维表格
- **分类管理**：支持添加标签或分类
- **快速预览**：收藏前可预览和编辑信息

### 2.2 扩展功能
- **快捷键支持**：键盘快捷键快速收藏
- **同步状态**：显示收藏状态和同步进度
- **历史记录**：查看最近收藏的记录

## 3. 技术架构

### 3.1 前端技术栈
- **Chrome Extension API**：Manifest V3
- **Vue.js 3**：用户界面框架
- **TypeScript**：类型安全
- **Tailwind CSS**：样式框架

### 3.2 后端集成
- **飞书开放平台API**：多维表格API
- **Authentication**：OAuth 2.0认证
- **数据存储**：Chrome本地存储

### 3.3 核心组件
```
chrome-extension/
├── manifest.json          # 扩展配置
├── background/            # 后台脚本
├── content/              # 内容脚本
├── popup/                # 弹窗界面
├── options/              # 设置页面
└── utils/                # 工具函数
```

## 4. 用户界面设计

### 4.1 弹窗界面 (320x480px)
- **顶部**：飞书logo + 扩展名称
- **主体区域**：
  - 网页预览卡片（标题、URL、favicon）
  - 备注输入框
  - 标签选择器
  - 表格选择下拉框
- **底部**：保存按钮 + 设置按钮

### 4.2 设置页面
- **飞书账户**：登录状态、授权管理
- **默认设置**：默认表格、默认标签
- **快捷键**：自定义快捷键设置
- **数据同步**：同步选项和状态

## 5. API集成方案

### 5.1 飞书多维表格API
```javascript
// 核心API端点
POST /open-apis/bitable/v1/apps/{app_token}/tables/{table_id}/records
```

### 5.2 数据结构设计
```json
{
  "fields": {
    "标题": "网页标题",
    "URL": "https://example.com",
    "描述": "网页描述或用户备注",
    "标签": ["技术", "学习"],
    "收藏时间": "2024-01-01 10:00:00",
    "状态": "已读/未读"
  }
}
```

## 6. 开发计划

### 6.1 第一阶段（MVP）- 2周
- [x] 项目初始化和基础架构
- [ ] Chrome扩展基础框架
- [ ] 简单弹窗界面
- [ ] 飞书API集成
- [ ] 基础收藏功能

### 6.2 第二阶段（功能完善）- 2周
- [ ] 用户界面优化
- [ ] 标签和分类功能
- [ ] 设置页面开发

### 6.3 第三阶段（增强功能）- 1周
- [ ] 快捷键支持
- [ ] 性能优化
- [ ] 测试和发布准备

## 7. 风险评估

### 7.1 技术风险
- **API限制**：飞书API调用频率限制
- **权限问题**：Chrome扩展权限申请
- **跨域问题**：网页数据获取限制

### 7.2 缓解方案
- 实现本地缓存和队列机制
- 合理设计权限申请流程
- 使用content script解决跨域问题

## 8. 成功指标

### 8.1 功能指标
- 收藏成功率 > 95%
- 界面响应时间 < 2秒
- 数据同步成功率 > 98%

### 8.2 用户体验指标
- 单次收藏操作 < 3步
- 用户学习成本 < 5分钟
- 错误恢复时间 < 30秒

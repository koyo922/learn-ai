<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lark Bookmarks</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <!-- 头部 -->
    <header class="header">
      <div class="logo">
        <img src="../icons/icon32.png" alt="Lark" class="logo-img">
        <span class="app-name">飞书书签收藏器</span>
      </div>
      <button class="settings-btn" id="settingsBtn" title="设置">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 8a4 4 0 1 0 0 8 4 4 0 0 0 0-8zM12 6a6 6 0 1 1 0 12 6 6 0 0 1 0-12z"/>
          <path d="M12 1v6m0 10v6m11-7h-6m-10 0H1m15.5-6.5l-4.24 4.24M8.76 8.76L4.52 4.52m12.02 12.02l-4.24-4.24M8.76 15.24L4.52 19.48"/>
        </svg>
      </button>
    </header>

    <!-- 主体内容 -->
    <main class="main">
      <!-- 网页预览卡片 -->
      <div class="page-preview" id="pagePreview">
        <div class="page-favicon">
          <img id="pageFavicon" src="" alt="favicon">
        </div>
        <div class="page-info">
          <h3 class="page-title" id="pageTitle">正在获取页面信息...</h3>
          <p class="page-url" id="pageUrl">-</p>
        </div>
      </div>

      <!-- 表单区域 -->
      <form class="bookmark-form" id="bookmarkForm">
        <!-- 备注输入 -->
        <div class="form-group">
          <label for="noteInput">备注</label>
          <textarea 
            id="noteInput" 
            placeholder="添加备注或描述..."
            rows="3"
          ></textarea>
        </div>

        <!-- 标签选择 -->
        <div class="form-group">
          <label for="tagsInput">标签</label>
          <div class="tags-container">
            <input 
              type="text" 
              id="tagsInput" 
              placeholder="输入标签，按回车添加"
              class="tags-input"
            >
            <div class="tags-list" id="tagsList"></div>
          </div>
        </div>

        <!-- 表格选择 -->
        <div class="form-group">
          <label for="tableSelect">目标表格</label>
          <select id="tableSelect" class="table-select">
            <option value="">请选择表格...</option>
          </select>
        </div>

        <!-- 状态提示 -->
        <div class="status-message" id="statusMessage"></div>
      </form>
    </main>

    <!-- 底部按钮 -->
    <footer class="footer">
      <button class="btn btn-secondary" id="cancelBtn">取消</button>
      <button class="btn btn-primary" id="saveBtn" disabled>
        <span class="btn-text">保存</span>
        <span class="btn-loading" style="display: none;">
          <svg class="spinner" width="14" height="14" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none" opacity="0.25"/>
            <path fill="currentColor" d="M4 12a8 8 0 0 1 8-8v2a6 6 0 0 0-6 6h2z" opacity="0.75"/>
          </svg>
          保存中...
        </span>
      </button>
    </footer>
  </div>

  <!-- 登录提示 -->
  <div class="login-prompt" id="loginPrompt" style="display: none;">
    <div class="login-content">
      <h3>需要登录飞书</h3>
      <p>请先在设置页面登录您的飞书账户</p>
      <button class="btn btn-primary" id="openSettingsBtn">打开设置</button>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>